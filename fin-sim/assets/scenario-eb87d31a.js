import{g as t,a as v,d as b,s as k}from"./index-f6239866.js";import{s as l,g as f,a as w}from"./store-c6a84c78.js";const J=(n,e,s,o)=>e*n[o]/n[s];function V(){document.removeEventListener(p,I),document.addEventListener(p,I),l(),q()}function I(){const n=t(document,r.lists.scenarioItems),e=t(document,r.templates.scenarioItem),s=v(n,e);h(n,s),i()}function h(n,e){e.addEventListener(G,()=>{n.removeChild(e),i()}),e.addEventListener(x,u),e.addEventListener(T,u),l(e),O(e)}function O(n){const e=t(n,r.lists.scenarioItemEntries);n.addEventListener(H,()=>j(e))}function j(n){const e=t(document,r.templates.scenarioItemEntry),s=v(n,e);g(n,s),i()}function g(n,e){e.addEventListener(M,()=>{n.removeChild(e),i()}),e.addEventListener(A,u),e.addEventListener(S,u),l(e)}function q(){const n=t(document,r.lists.scenarioItems),e=f(C);if(e){const s=b(e);let o=0;for(;s.children.length>0&&s.firstElementChild;){n.appendChild(s.firstElementChild),h(n,n.children[o]);const c=t(n.children[o],r.lists.scenarioItemEntries);for(const a of c.children)g(c,a);o+=1}}}function i(){const n=t(document,r.lists.scenarioItems);w(C,k(n))}function u(){const n=t(document,r.lists.scenarioItems),e=f(B);if(!e)return alert("Exchange data not found. Please set exchange data in Exchange Rates.");const s=JSON.parse(e);for(const o of n.children){let c=0;const a=t(o,r.inputs.scenarioCurrency),d=t(o,r.inputs.scenarioPeriod),L=t(o,r.lists.scenarioItemEntries);for(const m of L.children){const F=t(m,r.inputs.scenarioEntryAmount),E=t(m,r.inputs.scenarioEntryCurrency),R=t(m,r.outputs.scenarioItemEntryAmount),z=t(m,r.outputs.scenarioItemEntryCurrency),y=parseFloat(F.value||"0");R.innerText=y.toFixed(2),z.innerText=E.value||"--";const K=J(s,y,E.value,a.value)||0;c+=K}const N=t(o,r.outputs.scenarioItemAmount),D=t(o,r.outputs.scenarioItemCurrency),P=t(o,r.outputs.scenarioItemPeriod),$=t(o,r.outputs.scenarioItemDirection);c*=parseInt(d.value||"1"),N.innerText=c.toFixed(2),D.innerText=a.value||"--",P.innerText=d.value||"--",$.innerText=c>0?"↗":"↘"}i()}const C="scenarios",B="exchange",p="scenario-add",G="scenario-remove",x="scenario-period",T="scenario-currency",H="scenario-entry-add",M="scenario-entry-remove",A="scenario-entry-amount",S="scenario-entry-currency",r={lists:{scenarioItems:"#scenario-items",scenarioItemEntries:"#scenario-entries"},templates:{scenarioItem:"#scenario-template",scenarioItemEntry:"#scenario-entry-template"},inputs:{scenarioPeriod:`select[name=${x}]`,scenarioCurrency:`select[name=${T}]`,scenarioEntryAmount:`input[name=${A}]`,scenarioEntryCurrency:`select[name=${S}]`},outputs:{scenarioItemAmount:"#scenario-amount",scenarioItemCurrency:"#scenario-currency",scenarioItemPeriod:"#scenario-period",scenarioItemDirection:"#scenario-direction",scenarioItemEntryAmount:"#scenario-entry-amount",scenarioItemEntryCurrency:"#scenario-entry-currency"}};export{V as init};
